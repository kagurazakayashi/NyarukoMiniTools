# ![icon](install_script/icon.ico) NyarukoMiniTools

[English](README.md) | 简体中文

- 存放一些超小的 Windows 程序的仓库。
- 这些工具全都是 C 语言编写。
- 通过这些新增的工具命令，可以让 bat 批处理变得更方便。

## 应用场景示例

我在平时使用 Windows 制作一些 bat 批处理脚本时，会遇到需要使用某些系统没有提供的命令。因此创建了本仓库，存储一些实用工具。例如：

- bat 中获取时间值会因区域设置而遇到兼容性问题，单独获取某个时间或日期会麻烦，而 `datetime.exe "yyyy-MM-dd HH:mm:ss"` 解决了它。例如获得现在的分钟数只需要 `datetime.exe mm` 。
- 有一个软件中的 exe 组件我不想让其发挥功能，而又不想引发权限之类的错误（例如替换软件中的广告弹窗程序），用 `null.exe` 替换它，它就什么功能都没有了，并且系统视为正常执行。
- 我想生成一个随机密码，但 Windows 上没有 `pwgen` 命令，那么生成 1 个 64 位密码就用 `pwgen.exe 64 1` 吧。它还支持硬件随机数生成器。
- 我想开发一个和控制台程序交互的 GUI 软件，输入什么就回复什么的 `reflex.exe` 是一个好办法。它还支持持续输出时间模式 `reflex.exe /T` 。
- 我有一个路径 `\dir\path\` 想转换为 `/dir/path/` ，`repstr.exe \dir\path\ \ /` 即可搞定。可以用来快速替换各种英文字符串。
- 我想等几秒再继续运行下一条命令，但 Windows 上没有 `sleep` 命令，而 `timeout` 在旧版本上没有并且会输出多余信息，那么就用 `sleep.exe` 吧。它还支持高精度模式（时间同步）和标注时间单位，例如等待一分钟用 `sleep.exe 1m` 即可，你也可以加上 `/D` 显示倒计时。
- 我想一键息屏，双击启动 `scrctl.exe` 即可。配合 `sleep.exe` 命令加个延迟可以防止刚运行后误滑鼠标而中止。
- 我运行一个命令，又想实时看到它的输出，又想实时记录到日志文件，但 Windows 上没有 `tee` 命令，那么就用 `要执行的命令 2>&1 | tee.exe 日志文件.log` 吧。
- 我和我的朋友约好，只要在这个小时或者这天，传输的东西都用 `tspwd.exe` 来生成密码，我们就再也不需要互相告诉对方密码了，它还是个动态密码。只需事先约定好预定义“盐”。或者从公司电脑复制到U盘，回家再移动到电脑的临时传输文件的场合，也可以使用它的动态密码来临时加密。
- 我正在写一个旧版语言程序，代码中如果有非数字和英文字符、或者特殊符号会出现编译错误，使用 `chkascii.exe` 可以预先进行检查。

## 安裝

1. 从 `Release` 中下载最新编译版本。
2. 提取与当前系统对应的架构(x86/x64)版本文件，将提取出的所有 `.exe` 文件放在同一个文件夹中。

### 在 cmd 中随时作为命令调用

如果安装时选择了 `path` 组件，将自动添加安装文件夹到系统 `path` 环境变量中。

如果是手动安装，可以选择一下其中之一：

- 将本程序集中的所有 `.exe` 拷贝到 `%SystemRoot%\system32\` 文件夹中。
- 将本程序集所在的文件夹添加到 `path` 环境变量，可以使用 `path.exe` 实现。

### 兼容性

- 支持 Win32 x86, x64, ARM, ARM64 。
- 以下程序在 ARM 平台上通过仿真运行，只支持版本较新的 Windows 10 on ARM 及以后版本：
  - 所有平台的安装程序均使用 x86 架构生成，安装后的文件则是目标平台。
    - 可以下载 portable.7z 来跳过安装步骤。
  - `path.exe` 没有 ARM32 版本，因此 ARM32 安装包中提供的将是 x86 版本。

## 卸载

和安装操作反向操作即可。

## ![sleep](sleep/icon1.ico) sleep.exe

- 功能类似于 sleep: 暂停一定时间。
  - 补充 Windows 中缺失的批处理中常用的延时命令 `sleep` 。不再需要 ping 等命令作延迟替代了。
  - 支持单位（秒、分、时、天）。
  - 支持多参数相加。
  - 支持显示倒计时。

### sleep:使用

- 使用: `SLEEP [选项] 数字[后缀]`...
- 暂停 `数字` 秒。
- 后缀可以是：
  - `s` 是秒钟 (the default),
  - `m` 是分钟,
  - `h` 是小时,
  - `d` 是天。
- `数字` 支持小数。
  - `数字` 的默认值的 1 秒
  - 如果给了 1 个以上的时间参数，暂停的时间是它们加在一起。
- `选项`:
  - `/D` : 每秒输出剩余时间（秒）
  - `/H` : 使用高精度计时器（更消耗 CPU），不建议和 `/D` 同时使用。
  - `/?` : 显示此帮助信息
  - `/V` : 显示版本信息

## ![datetime](datetime/icon1.ico) datetime.exe

输出时间日期。更方便地在批处理中获取需要的格式时间。

### datetime:使用

- 使用: `datetime 模式 [时间]`
- 模式:
  - 支持的模式: `yyyy,yy,MM,dd,HH,hh,mm,ss`
    - （4位年，2位年，月，日，24小时时，12小时时，分，秒）
  - 不支持模式: `y,M,d,H,h,m,s,ddd,dddd,MMM,MMMM,gg ...`
- 时间:
  - `gmt` 标准时间 或者 `local` 本地时间 (默认值)
- 演示:
  - `datetime "yyyy-MM-dd HH:mm:ss"`
  - `->  2021-02-01 20:21:11`
- `datetime /?` : 显示此帮助信息
- `datetime /V` : 显示版本信息

## ![repstr](repstr/icon1.ico) repstr.exe

替换英文字符串

### repstr:使用

- 使用: `repstr [模式] [原字符串] [要替换的字符串] [替换为]`
  - 所有字符串只允许英文和数字
- 模式:
  - `/c` : 忽略大小写
  - `/?` : 显示此帮助信息
  - `/V` : 显示版本信息
- 演示:
  - `repstr info\txt\readme.txt \ /` -> `info/txt/readme.txt`

## ![scrctl](scrctl/icon1.ico) scrctl.exe

屏幕开关控制。
方便地快速关闭显示器和锁定系统。

### scrctl:使用

- 使用: `scrctl [模式]`
- 模式:
  - `off` 或 `/0` 关闭显示器 (default)
  - `on` 或 `/1` 激活显示器
  - `eco` 或 `/2` 节电模式
  - `lock` 或 `/3` 关闭显示器并锁定系统
  - `/?` 显示此帮助信息
  - `/V` 显示版本信息

## ![pwgen](pwgen/icon1.ico) pwgen.exe

pwgen-like: 功能类似于 `pwgen`: 快捷生成由随机字符组成的密码。
随机密码生成器。

### pwgen:使用

- 使用:   `pwgen [要包含的字符] [单个密码长度] [要生成的数量]`
  - 或者 `[单个密码长度] [要生成的数量]`
  - 或者 `[单个密码长度]`
- 要包含的字符 包括:
  - `A` : 大写字母
  - `a` : 小写字母
  - `n` : 数字
  - `s` : 标点符号
  - `/?`: 显示此帮助信息
  - `/V`: 显示版本信息
- 命令示例: `pwgen Aan 32 1` (生成1个32位的由大小写字母和数字组成的密码)

## ![null](null/icon1.ico) null.exe

该程序不做任何事情。
程序直接退出自己，用于将普通 exe 替换来禁用其原有功能。
例如替代软件中的广告弹窗 exe 。

## ![reflex](reflex/icon1.ico) reflex.exe

输入输出测试工具。
这个程序可以用于开发调用其他程序的软件时进行测试，检查输入输出通讯管道是否正常。

### reflex:使用

- 使用: `reflex [模式]`
- 模式:
  - (留空,不提供) : 输入一行字符串，返回一行字符串（单个字符串长度不能超过 1000 半角字符）
  - `/T` : 每隔一秒钟，输出一行当前的时间（不再响应其他输入）
  - `/?`: 显示此帮助信息
  - `/V`: 显示版本信息
  - (其他字符串): 将输入的参数直接输出并退出

## ![reflex](tspwd/icon1.ico) tspwd.exe

- 获取当前时间戳的SHA256。
  - 例如：A 和 B 的拥有同样区间的时间戳，那么两边的密码是一样的，两边只要知道时间便可以在不需要密码传输的情况下进行加密传送，相当于拥有一个64位的动态密码。需要根据对方的大概解密时间确定时间戳精度。为了防止被反推和猜测时间戳，可以在此基础上加入预共享的固定密码作为盐。

### tspwd:使用

- 使用: `tspwd [时间戳精度] [盐]`
  - 时间戳精度: `y` / `m` / `d` / `h` / `m` / `s`(默认)
  - 盐: 任意英文字母/数字组成的字符串，小于 200 字符 (默认为空)。
- 命令示例: `tspwd m "aabbcc"`
  - 生成当前月份的 SHA256 临时密码，加入固定密码 `aabbcc` 防止反推。

## ![tee](tee/icon1.ico) tee.exe

tee-like: 功能类似于 `tee` 。 将标准输入复制到每个文件，并复制到标准输出。

### tee:使用

- 使用: `tee [模式] [要写入的日志文件]`
- 模式:
  - `/A` : 追加到给定的文件，而不是覆盖
  - `/?`: 显示此帮助信息
  - `/V`: 显示版本信息

## ![chkascii](chkascii/icon1.ico) chkascii.exe

检查一个文件中的文本是否在标准ASCII码的范围。
运行后会给出统计报告输出。

### chkascii:使用

- 使用:  `chkascii CHKASCII [MODE] [filepath]`
- 模式:
  - `/D`: 显示详细检查进度（输出每个字的检查结果，慢）
  - `/?`: 显示此帮助信息
  - `/V`: 显示版本信息
- 如果不提供 `filepath` ，将进入接受用户键盘输入模式。

## ![path](install_script\path.ico) path.exe

通过命令添加或删除 PATH 变量中的路径。

请前往: [kagurazakayashi/PathEd](https://github.com/kagurazakayashi/PathEd/blob/master/README.chs.md)

## 许可协议

```txt
NyarukoMiniTools 使用 「木兰宽松许可证，第2版」 许可证。
您可以根据 「木兰宽松许可证，第2版」 的条款和条件使用该软件。
您可以在以下网址获取 「木兰宽松许可证，第2版」 的副本:
         http://license.coscl.org.cn/MulanPSL2
本软件按“原样”提供，不提供任何明示或暗示的保证，
包括但不限于不侵权、适销性或适用于特定用途的保证。
有关更多详细信息，请参阅 「木兰宽松许可证，第2版」 。
```
